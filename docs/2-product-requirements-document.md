# Python Judge PRD (Product Requirements Document)

**버전**: 1.0
**최종 수정일**: 2025-11-25
**작성자**: Junha Kang
**상태**: 초안

## 변경 이력

| 버전 | 날짜       | 변경 내용 | 작성자     |
| ---- | ---------- | --------- | ---------- |
| 1.0  | 2025-11-25 | 초안 작성 | Junha Kang |

---

## 1. 제품 개요

### 1.1 제품 비전

Python Judge는 Python 알고리즘 코딩 테스트를 온라인으로 수행할 수 있는 교육용 플랫폼입니다. 기존 오프라인 채점의 비효율성을 해결하고, 학생들에게 즉각적인 피드백을 제공하여 학습 효율을 극대화합니다.

### 1.2 핵심 가치 제안

- **즉각적 피드백**: 코드 제출 후 평균 5초 이내 자동 채점 결과 제공
- **학습 효율 향상**: 실시간 채점으로 반복 학습 주기 단축
- **관리 효율화**: 자동 채점 및 스코어보드로 교육자의 평가 부담 감소
- **체계적 학습**: 11개 카테고리 기반 단계별 문제 제공

### 1.3 주요 이해관계자

- **학생**: 초기 24명 → 3년 내 50명 목표
- **관리자/교육자**: 2명
- **교육 환경**: 기업 교육, 단기 집중 과정, 수시 평가

---

## 2. 타겟 사용자

### 2.1 학생 페르소나

**프로필**:

- 기업 교육 과정 참여자
- Python 기초~중급 수준
- 단기 집중 과정(평균 40시간) 수강
- 즉각적인 피드백과 성취감 중요

**니즈**:

- 문제를 풀고 즉시 정답 여부 확인
- 자신의 진도와 순위 파악
- 카테고리별 체계적 학습
- 제출 이력을 통한 학습 이력 관리

**페인 포인트**:

- 오프라인 채점의 긴 대기 시간
- 어떤 부분이 틀렸는지 알 수 없음
- 학습 진도 파악 어려움

### 2.2 관리자/교육자 페르소나

**프로필**:

- Python 교육 담당자
- 다수 학생 평가 관리
- 수시로 평가 세션 운영

**니즈**:

- 문제 출제 및 관리 효율화
- 실시간 학생 진도 모니터링
- 학생별 성취도 분석
- 평가 세션 운영 자동화

**페인 포인트**:

- 수동 채점의 높은 시간 소요
- 학생별 성취도 파악 어려움
- 반복적인 평가 세션 설정

---

## 3. 기능 요구사항

### 3.1 사용자 관리

#### FR-001: 학생 회원가입

- **설명**: 학생이 ID, 이름, 비밀번호로 회원가입
- **입력**: 로그인 ID(4-20자), 이름(2-50자), 비밀번호(8-100자)
- **출력**: 회원가입 성공/실패 메시지
- **비즈니스 로직**: ID 중복 검증, 비밀번호 bcrypt 암호화
- **예외**: 중복 ID 시 에러 반환

#### FR-002: 로그인/로그아웃

- **설명**: JWT 기반 인증
- **입력**: 로그인 ID, 비밀번호
- **출력**: JWT 토큰 (유효 시간 2시간)
- **비즈니스 로직**: 비밀번호 검증 후 토큰 발급
- **예외**: 잘못된 인증 정보 시 401 에러

#### FR-003: 비밀번호 찾기/변경

- **설명**: 비밀번호 재설정 기능
- **입력**: 이름 (찾기), 기존/새 비밀번호 (변경)
- **출력**: 성공/실패 메시지
- **비즈니스 로직**: 본인 인증 후 비밀번호 변경 허용

#### FR-004: 관리자 계정 관리

- **설명**: 사전 등록된 관리자 계정으로 로그인
- **입력**: 관리자 ID, 비밀번호
- **출력**: JWT 토큰 (관리자 권한 포함)
- **비즈니스 로직**: RBAC 기반 권한 검증

### 3.2 문제 관리

#### FR-101: 문제 등록/수정/삭제 (관리자)

- **설명**: 관리자가 알고리즘 문제 CRUD
- **입력**: 제목, 설명, 카테고리, 난이도(1-5), 시간 제한(1-10초), 메모리 제한(256MB), 테스트 케이스
- **출력**: 문제 ID, 성공/실패 메시지
- **비즈니스 로직**:
  - 공개/비공개 테스트 케이스 구분 (공개 1-3개, 비공개 10-50개)
  - 문제 세트 할당 (조건문, 반복문, 딕셔너리, 파일 I/O, 예외 처리)

#### FR-102: 카테고리별 문제 조회 (학생)

- **설명**: 11개 카테고리로 문제 필터링
- **입력**: 카테고리 ID, 난이도 필터 (선택)
- **출력**: 문제 목록 (ID, 제목, 난이도, 정답률, 제출 수)
- **비즈니스 로직**: 공개 상태인 문제만 조회

#### FR-103: 문제 상세 보기

- **설명**: 문제 설명, 예제 입출력, 제약 조건 표시
- **입력**: 문제 ID
- **출력**: 문제 상세 정보, 공개 테스트 케이스 (1-3개)
- **비즈니스 로직**: 비공개 테스트 케이스는 학생에게 비표시

#### FR-104: 테스트 케이스 관리 (관리자)

- **설명**: 문제별 테스트 케이스 등록/수정/삭제
- **입력**: 문제 ID, 입력 데이터, 예상 출력, 공개 여부
- **출력**: 테스트 케이스 ID
- **비즈니스 로직**: 최소 10개 이상 테스트 케이스 등록 권장

### 3.3 제출 및 채점

#### FR-201: Python 코드 제출

- **설명**: 학생이 .py 파일 또는 코드 텍스트 제출
- **입력**: 문제 ID, Python 코드 (최대 64KB), Python 버전 (3.8-3.12)
- **출력**: 제출 ID, 채점 대기 상태
- **비즈니스 로직**:
  - 5초 이내 동일 문제 중복 제출 차단
  - AST 파싱으로 금지 모듈/함수 사전 검증
  - 금지 모듈: os, subprocess, socket, urllib, eval, exec
- **예외**: 금지 패턴 감지 시 Syntax Error 반환

#### FR-202: 자동 채점

- **설명**: 제출된 코드를 전체 테스트 케이스로 자동 채점
- **입력**: 제출 ID
- **출력**: 채점 결과 (AC/WA/TLE/RE/SE/MLE), 통과 케이스 수, 실행 시간, 메모리
- **비즈니스 로직**:
  - subprocess.run으로 별도 프로세스 실행
  - 각 테스트 케이스별 실행 및 출력 비교
  - trailing whitespace 무시, 줄바꿈 정규화
  - 부동소수점 상대 오차 1e-9 허용
  - 모든 케이스 통과 시 AC, 하나라도 실패 시 WA
- **채점 상태**:
  - **AC (Accepted)**: 모든 테스트 케이스 통과
  - **WA (Wrong Answer)**: 출력값 불일치
  - **TLE (Time Limit Exceeded)**: 시간 제한 초과
  - **RE (Runtime Error)**: 실행 중 예외 발생
  - **SE (Syntax Error)**: 문법 오류 또는 금지 모듈 사용
  - **MLE (Memory Limit Exceeded)**: 메모리 제한 초과 (256MB)
- **성능 목표**: 평균 5초, 최대 10초 (단일 컨테이너 기준, 필요 시 스케일업/아웃)

#### FR-203: 제출 이력 조회

- **설명**: 학생별 제출 이력 테이블 표시
- **입력**: 학생 ID (본인만), 문제 ID (선택)
- **출력**: 제출 목록 (제출 시각, 문제, 결과, 실행 시간)
- **비즈니스 로직**: 최신 제출이 상단, 페이지네이션

#### FR-204: 채점 결과 상세

- **설명**: 채점 결과 상세 정보 조회
- **입력**: 제출 ID
- **출력**: 채점 상태, 통과 케이스 수/전체 케이스 수, 실행 시간, 메모리, 에러 메시지 (RE 시)
- **비즈니스 로직**: 어떤 테스트 케이스에서 실패했는지 비공개

### 3.4 교육 세션 관리

#### FR-301: 세션 생성/관리 (관리자)

- **설명**: 교육 세션 생성, 학생/문제 할당, 시작/종료
- **입력**: 세션 이름, 시작/종료 시각, 대상 학생 목록, 할당 문제 목록, 세션 타입 (정규/모의고사/연습)
- **출력**: 세션 ID
- **비즈니스 로직**:
  - 세션 상태 자동 전환 (예정 → 진행중 → 종료)
  - 학생은 여러 세션 동시 참여 가능

#### FR-302: 실시간 스코어보드

- **설명**: 세션 내 학생 순위 실시간 표시
- **입력**: 세션 ID
- **출력**: 순위, 학생 이름, 해결 문제 수, 점수
- **비즈니스 로직**:
  - 정답 제출 시 즉시 점수 반영
  - 동점 시 먼저 제출한 학생 우선
  - **폴링 방식**으로 실시간 업데이트 (3-5초 간격)
    - 초기 구현에서는 WebSocket 미사용 → 폴링 채택
    - 클라이언트가 주기적으로 `/api/sessions/:id/scoreboard` 요청
  - 순위 변동 시 애니메이션 효과

#### FR-303: 세션 초기화 (관리자)

- **설명**: 특정 세션의 제출 이력 및 스코어보드 리셋
- **입력**: 세션 ID, 초기화 기준 시각 (선택)
- **출력**: 초기화 성공 메시지
- **비즈니스 로직**:
  - 해당 세션의 제출 이력 삭제 (soft delete)
  - 스코어보드 초기화
  - 감사 로그 기록 (누가, 언제, 어떤 세션)
  - 복구 불가 경고 표시

### 3.5 보안 기능

#### FR-401: AST 정적 분석

- **설명**: 코드 제출 시 악의적 패턴 사전 검증
- **입력**: Python 코드
- **출력**: 검증 성공/실패, 에러 메시지
- **비즈니스 로직**:
  - ast 모듈로 코드 파싱
  - import 문 화이트리스트 검증
  - 금지 함수 사용 탐지 (eval, exec, **import**, compile)

#### FR-402: 프로세스 격리 실행

- **설명**: subprocess.run으로 코드를 별도 프로세스에서 실행
- **입력**: Python 코드, 테스트 입력
- **출력**: 실행 결과, 표준 출력, 실행 시간, 메모리
- **비즈니스 로직**:
  - timeout 설정으로 시간 제한
  - psutil로 메모리 모니터링
  - 임시 디렉토리 생성 및 실행 후 정리

#### FR-403: RBAC 접근 제어

- **설명**: 역할 기반 권한 관리
- **비즈니스 로직**:
  - 학생: 문제 조회, 코드 제출, 본인 이력 조회, 스코어보드 조회
  - 관리자: 학생 권한 + 문제 관리, 세션 관리, 전체 학생 조회
  - 최고관리자: 관리자 권한 + 관리자 계정 관리, 시스템 설정

#### FR-404: 감사 로그

- **설명**: 중요 행위 자동 기록
- **기록 대상**: 로그인, 문제 등록/수정/삭제, 코드 제출, 세션 생성/초기화, 접근 거부
- **보관 기간**: 90일
- **조회 권한**: 최고관리자만

---

## 4. 비기능 요구사항

### 4.1 성능 요구사항

| 항목             | 목표                                 |
| ---------------- | ------------------------------------ |
| 채점 응답 시간   | 평균 5초, 최대 10초 (함수 한도 기준) |
| 페이지 로딩 시간 | 3초 이내                             |
| 동시 접속 처리   | 30명                                 |
| 동시 제출 처리   | 채점 큐 최대 500개                   |
| API 응답 시간    | 95% 요청 1초 이내                    |

### 4.2 보안 요구사항

| 항목      | 요구사항                                                            |
| --------- | ------------------------------------------------------------------- |
| 인증      | JWT 기반, 2시간 유효                                                |
| 비밀번호  | bcrypt 암호화 저장                                                  |
| 코드 검증 | AST 정적 분석 (제출 전)                                             |
| 코드 실행 | subprocess 프로세스 격리                                            |
| 금지 모듈 | os, subprocess, socket, urllib, eval, exec                          |
| 허용 모듈 | math, random, itertools, collections, string, re, datetime, json 등 |
| 파일 I/O  | 임시 디렉토리만 허용                                                |
| 네트워크  | 전면 차단                                                           |
| HTTPS     | 필수 (배포 환경에서 TLS 구성)                                       |

### 4.3 가용성 요구사항

| 항목                 | 요구사항                                             |
| -------------------- | ---------------------------------------------------- |
| 시스템 가동률        | 99% 이상                                             |
| 백업 주기            | 일 1회 자동 (Supabase 백업 예정, 현재 수동/스크립트) |
| 복구 목표 시간 (RTO) | 4시간                                                |
| 복구 목표 시점 (RPO) | 24시간                                               |

### 4.4 확장성 요구사항

| 항목        | 요구사항                                 |
| ----------- | ---------------------------------------- |
| 초기 사용자 | 24명                                     |
| 3년 목표    | 50명                                     |
| 문제 수     | 최대 1,000개                             |
| 제출 이력   | 영구 보관                                |
| 수평 확장   | 필요 시 인스턴스/리전 수 확장 (컨테이너) |

### 4.5 호환성 요구사항

| 항목        | 요구사항                                      |
| ----------- | --------------------------------------------- |
| 브라우저    | Chrome, Firefox, Edge (최신 버전)             |
| 반응형      | 데스크탑/태블릿 최적화 (모바일 우선순위 낮음) |
| Python 버전 | 3.8, 3.9, 3.10, 3.11, 3.12 지원               |

---

## 5. UI/UX 요구사항

### 5.1 주요 화면

#### 1) 로그인/회원가입 화면

- 깔끔한 중앙 정렬 폼
- 학생/관리자 탭 전환
- 회원가입: ID, 이름, 비밀번호 입력

#### 2) 문제 목록 화면 (학생)

- 좌측: 카테고리 필터 (11개)
- 우측: 문제 카드 그리드
- 각 카드: 제목, 난이도, 정답률, 내 제출 상태 표시
- 검색 및 난이도 필터

#### 3) 문제 상세 화면

- **2컬럼 레이아웃**
  - 좌측 (50%): 문제 설명, 입출력 예제, 제약 조건
  - 우측 (50%): 코드 에디터 (또는 파일 업로드)
- 하단: 제출 버튼, Python 버전 선택
- 제출 후 채점 진행 상황 표시

#### 4) 제출 이력 화면

- 테이블 형태, 최신 제출 상단
- 컬럼: 제출 시각, 문제, 결과 (색상 코드), 실행 시간, 메모리, 상세 보기 버튼
- 필터: 문제별, 결과별

#### 5) 채점 결과 상세 모달

- 채점 상태 (AC/WA/TLE/RE/SE/MLE)
- 통과한 테스트 케이스 수 (예: 12/15)
- 실행 시간, 메모리 사용량
- 에러 메시지 (RE/SE 시)

#### 6) 실시간 스코어보드

- 순위, 학생 이름, 해결 문제 수, 점수 테이블
- **폴링 방식**으로 실시간 업데이트 (3-5초 간격)
  - 초기 버전 WebSocket 미사용 → 폴링 우선
- 순위 변동 시 행 애니메이션 (색상 변경, 이동)
- 내 순위 하이라이트
- 수동 새로고침 버튼 제공

#### 7) 관리자 대시보드

- 문제 관리: 등록/수정/삭제, 테스트 케이스 관리
- 세션 관리: 생성, 학생/문제 할당, 시작/종료, 초기화
- 학생 관리: 목록, 성취도 조회
- 통계: 세션별 참여율, 문제별 정답률

### 5.2 사용자 플로우

#### 학생 문제 풀이 플로우

```
로그인 → 문제 목록 → 카테고리 선택 → 문제 선택 →
문제 읽기 → 코드 작성 → 제출 → 채점 대기 → 결과 확인 →
(오답 시) 코드 수정 후 재제출 OR (정답 시) 다음 문제
```

#### 관리자 세션 관리 플로우

```
로그인 → 세션 생성 → 학생 선택 → 문제 선택 →
세션 시작 → 실시간 모니터링 (스코어보드) → 세션 종료 →
성취도 리포트 확인
```

### 5.3 디자인 원칙

| 원칙      | 설명                                     |
| --------- | ---------------------------------------- |
| 직관적 UI | 학습 곡선 최소화, 명확한 레이블과 아이콘 |
| 빠른 응답 | 로딩 스피너, 낙관적 UI 업데이트          |
| 일관성    | Tailwind CSS 기반 통일된 디자인 시스템   |
| 피드백    | 모든 액션에 시각적 피드백 (토스트, 모달) |

---

## 6. 데이터 요구사항

### 6.1 주요 엔티티

#### students (학생)

- id (PK), military_id (UQ), login_id (UQ), name, password_hash, email, group_info, account_status, created_at, last_login

#### administrators (관리자)

- id (PK), login_id (UQ), name, password_hash, role_level, account_status, created_at, last_login

#### problems (문제)

- id (PK), title, description, category, difficulty, time_limit, memory_limit, author_id (FK), created_at, updated_at, visibility, accuracy_rate, submission_count

#### test_cases (테스트 케이스)

- id (PK), problem_id (FK), input_data, expected_output, is_public, order, created_at, updated_at

#### submissions (제출)

- id (PK), student_id (FK), problem_id (FK), session_id (FK), code, code_size, submitted_at, judging_status, result_id (FK), python_version

#### judging_results (채점 결과)

- id (PK), submission_id (FK), status (AC/WA/TLE/RE/SE/MLE), passed_cases, total_cases, execution_time, memory_usage, error_message, judged_at

#### education_sessions (교육 세션)

- id (PK), name, start_time, end_time, status, session_type, allow_resubmit, creator_id (FK), created_at, updated_at

#### session_students (세션-학생 매핑)

- session_id (FK), student_id (FK), joined_at

#### session_problems (세션-문제 매핑)

- session_id (FK), problem_id (FK), order

#### scoreboards (스코어보드)

- session_id (FK), student_id (FK), score, solved_count, rank, updated_at

#### audit_logs (감사 로그)

- id (PK), user_id (FK), user_role, action_type, target_resource, ip_address, user_agent, performed_at, result, error_message

### 6.2 데이터 관계

```
students 1 --- N submissions
administrators 1 --- N problems
problems 1 --- N test_cases
problems 1 --- N submissions
submissions 1 --- 1 judging_results
education_sessions N --- M students (through session_students)
education_sessions N --- M problems (through session_problems)
education_sessions 1 --- N scoreboards
```

### 6.3 데이터 보관 정책

| 데이터             | 보관 기간 | 백업   |
| ------------------ | --------- | ------ |
| 학생 정보          | 영구      | 일 1회 |
| 문제/테스트 케이스 | 영구      | 일 1회 |
| 제출 이력          | 영구      | 일 1회 |
| 채점 결과          | 영구      | 일 1회 |
| 세션 데이터        | 3년       | 일 1회 |
| 감사 로그          | 90일      | 일 1회 |

---

## 7. 기술 스택 및 아키텍처

### 7.1 기술 스택

| 계층          | 기술                                  | 선택 이유                             |
| ------------- | ------------------------------------- | ------------------------------------- |
| **Backend**   | Node.js + Express                     | REST API 개발에 익숙                  |
| **Frontend**  | React + Tailwind CSS                  | 컴포넌트 재사용성, 빠른 스타일링      |
| **Database**  | PostgreSQL (Supabase 예정, 현재 로컬) | 안정성, JSON 지원, 관리형 서비스 예정 |
| **배포**      | Render Web Service (컨테이너)         | Docker 이미지로 단일 서비스 운영      |
| **버전 관리** | GitHub                                | 협업 및 코드 관리                     |
| **CI/CD**     | GitHub Actions                        | 자동 테스트 및 배포                   |

### 7.2 시스템 아키텍처

```
[Client - React (Vite)]
      ↓ HTTPS
[Render - App Server (Express + 채점 엔진)]
      ↓
[PostgreSQL - Supabase (예정, 현재 로컬 Postgres)]
```

- **3-tier 아키텍처**: Presentation (React) - Application (Express API) - Data (PostgreSQL)
- **RESTful API**: 표준 HTTP 메서드 및 상태 코드 사용
- **컨테이너 배포**: Express API + 채점 엔진을 단일 컨테이너로 Render Web Service에 배포
- **Stateless**: JWT 기반 무상태 인증

### 7.3 보안 아키텍처

| 레이어        | 보안 메커니즘                                       |
| ------------- | --------------------------------------------------- |
| **네트워크**  | HTTPS 필수 (Render 기본 제공)                       |
| **인증**      | JWT (2시간 유효), httpOnly 쿠키                     |
| **권한**      | RBAC (학생/관리자/최고관리자)                       |
| **코드 실행** | AST 정적 분석 → subprocess 격리 → 타임아웃          |
| **데이터**    | Supabase RLS 예정, DB 최소 권한 롤, 비밀번호 bcrypt |
| **로깅**      | 감사 로그 90일 보관                                 |

---

## 8. MVP 범위 및 우선순위

### 8.1 MVP (Phase 1) - 필수 기능

**개발 기간**: 3개월

#### 사용자 관리

- ✅ 학생 회원가입/로그인
- ✅ 관리자 로그인 (사전 등록)
- ✅ 비밀번호 찾기/변경

#### 문제 관리

- ✅ 문제 등록/수정/삭제 (관리자)
- ✅ 카테고리별 문제 조회 (학생)
- ✅ 문제 상세 보기 (예제 입출력 포함)
- ✅ 테스트 케이스 관리

#### 제출 및 채점

- ✅ Python 코드 제출 (.py 업로드 또는 텍스트)
- ✅ 자동 채점 (AC/WA/TLE/RE/SE/MLE)
- ✅ 제출 이력 조회
- ✅ 채점 결과 상세 보기
- ✅ AST 정적 분석
- ✅ subprocess 프로세스 격리

#### 교육 세션

- ✅ 세션 생성/관리 (관리자)
- ✅ 실시간 스코어보드
- ✅ 세션 초기화

#### 보안

- ✅ JWT 인증
- ✅ RBAC 권한 관리
- ✅ 감사 로그

### 8.2 Phase 2 (3-6개월 후)

- 학업 성취도 상세 분석 리포트
  - 카테고리별 정답률
  - 문제 세트별 완성도
  - 제출 시도 횟수 분석
  - 평균 해결 시간
- 문제 추천 시스템
  - 학생별 약점 카테고리 분석
  - 난이도 자동 추천
- 코드 리뷰 기능 (관리자 → 학생)
  - 제출 코드에 댓글
  - 개선 제안
- 문제 난이도 통계 자동 조정
  - 정답률 기반 난이도 재산정

### 8.3 Phase 3+ 장기 계획

- 다른 프로그래밍 언어 지원 (Java, C++ 등)
  - 언어별 채점 엔진 추상화
  - 언어별 샌드박스 정책

### 8.4 제외 기능

- ❌ 실시간 코드 에디터 (IDE 기능)
  - 학생이 로컬 IDE 사용 권장
- ❌ 학생 간 코드 공유 및 협업
  - 개인 평가 중심
- ❌ 외부 LMS 연동
  - 독립 플랫폼으로 운영
- ❌ Docker/컨테이너 기반 실행
  - subprocess 프로세스 격리로 대체

---

## 9. 성공 지표 (KPI)

### 9.1 사용자 지표

| 지표              | MVP 목표 (3개월)     | 1년 목표   |
| ----------------- | -------------------- | ---------- |
| 가입 학생 수      | 24명                 | 50명       |
| 활성 사용자 (WAU) | 20명 (83%)           | 40명 (80%) |
| 관리자 활성도     | 주간 5회 이상 로그인 | 유지       |

### 9.2 참여 지표

| 지표                | MVP 목표  | 1년 목표              |
| ------------------- | --------- | --------------------- |
| 학생당 주간 제출 수 | 평균 10건 | 평균 15건             |
| 평균 문제 해결률    | 60%       | 70%                   |
| 세션 참여율         | 90%       | 95%                   |
| 문제 재시도율       | 40%       | 30% (1차 정답률 향상) |

### 9.3 시스템 지표

| 지표                | MVP 목표 | 1년 목표 |
| ------------------- | -------- | -------- |
| 채점 평균 응답 시간 | 5초 이내 | 3초 이내 |
| 시스템 가동률       | 99%      | 99.5%    |
| 동시 접속 처리      | 30명     | 50명     |

### 9.4 교육 효과 지표

| 지표             | 측정 방법            | 목표     |
| ---------------- | -------------------- | -------- |
| 학습 성취도 향상 | 세션 전후 평가 비교  | 20% 향상 |
| 교육자 만족도    | 설문 조사 (5점 만점) | 4점 이상 |
| 학생 만족도      | 설문 조사 (5점 만점) | 4점 이상 |
| 평가 시간 절감   | 오프라인 대비        | 70% 절감 |

---

## 10. 제약사항 및 가정

### 10.1 기술적 제약사항

| 제약사항                | 영향                    | 대응 방안                                              |
| ----------------------- | ----------------------- | ------------------------------------------------------ |
| **Docker 사용 필수**    | 컨테이너 빌드/배포 필요 | Dockerfile에 Node+Python 포함, Render Web Service 활용 |
| **웹소켓 미사용(초기)** | 실시간 양방향 통신 없음 | 폴링 방식 사용 (3-5초 간격), 추후 WebSocket/SSE 검토   |
| **컨테이너 자원 제한**  | CPU/RAM 초과 시 지연    | 타임아웃 5초, 메모리 256MB 기본 제한, 필요 시 스케일업 |
| **동기 처리**           | 캐시/메시지 큐 없음     | 초기 규모 작아 동기 처리 가능, 향후 Redis 도입 검토    |
| **Windows 개발 환경**   | 로컬/배포 환경 차이     | 컨테이너로 런타임 표준화, CI에서 Linux 빌드 검증       |

### 10.2 인프라 제약사항

| 항목                 | 제약                            | 비고                               |
| -------------------- | ------------------------------- | ---------------------------------- |
| Render Free 플랜     | 슬립/쿨다운 가능, 제한된 리소스 | 채점 중단 방지 위해 유료 검토 가능 |
| Supabase (Free 플랜) | 500MB DB, 2GB 전송량            | 초기 충분, 향후 Pro 전환           |
| 네트워크             | 공개 인터넷                     | 방화벽/VPN 불필요                  |

### 10.3 보안 제약사항

| 항목           | 제약            | 대응                                      |
| -------------- | --------------- | ----------------------------------------- |
| 코드 실행 격리 | Docker 불가     | subprocess + AST + 타임아웃 + 메모리 제한 |
| 인증           | LDAP/AD 불필요  | 자체 JWT 인증                             |
| 데이터 보호    | 개인정보 최소화 | 이름만 필수 수집, 이메일 선택             |

### 10.4 가정 사항

- 학생들이 Python 기초 문법 지식 보유
- 안정적인 인터넷 연결 환경
- 학생들이 Chrome/Firefox/Edge 최신 버전 사용
- 관리자가 문제 및 테스트 케이스 작성 가능
- 초기 24명 규모로 동기 처리 가능

---

## 11. 릴리스 계획

### 11.1 Phase별 계획

| Phase             | 기간       | 주요 기능                         | 목표                |
| ----------------- | ---------- | --------------------------------- | ------------------- |
| **Phase 1 (MVP)** | 3일        | 모든 핵심 기능                    | 실제 교육 과정 운영 |
| **Phase 2**       | 추가 3개월 | 성취도 분석, 문제 추천, 코드 리뷰 | 교육 효과 극대화    |
| **Phase 3**       | 장기       | 다중 언어 지원                    | 플랫폼 확장         |

### 11.2 주요 마일스톤

| 마일스톤               | 목표 달성 내용                | 목표일     | 상태      |
| ---------------------- | ----------------------------- | ---------- | --------- |
| **M1: 요구사항 확정**  | 도메인 정의서, PRD 완성       | 2025-11-25 | ✅ 완료   |
| **M2: 기술 스택 확정** | 아키텍처 설계, 개발 환경 구축 | Week 1     | 진행 예정 |
| **M3: Backend 개발**   | API 개발, 채점 엔진 구현      | Week 2-6   | 진행 예정 |
| **M4: Frontend 개발**  | 주요 화면 구현, API 연동      | Week 7-10  | 진행 예정 |
| **M5: 통합 테스트**    | 전체 기능 통합, 버그 수정     | Week 11    | 진행 예정 |
| **M6: MVP 출시**       | 실제 사용자 대상 오픈         | Week 12    | 진행 예정 |

### 11.3 의존성 및 선행 조건

- **M2 선행 조건**: Render 프로젝트, Supabase 계정 생성, GitHub Repository 생성
- **M3 선행 조건**: 데이터베이스 스키마 설계 완료
- **M4 선행 조건**: Backend API 문서화 완료 (Swagger)
- **M5 선행 조건**: 테스트 문제 및 테스트 케이스 10개 이상 준비
- **M6 선행 조건**: 관리자 계정 생성, 학생 초기 데이터 마이그레이션

---

## 12. 리스크 관리

### 12.1 기술적 리스크

| 리스크                               | 발생 가능성 | 영향도 | 완화 전략                                                                                                         |
| ------------------------------------ | ----------- | ------ | ----------------------------------------------------------------------------------------------------------------- |
| **Python 코드 샌드박스 보안 취약점** | 중          | 높음   | - AST 정적 분석 강화<br>- subprocess 타임아웃 엄격 설정<br>- 정기적인 보안 감사<br>- 금지 모듈 목록 지속 업데이트 |
| **컨테이너 자원 한도**               | 중          | 중     | - 채점 시간 최적화<br>- 시간 제한 10초 기본<br>- 필요 시 상위 플랜/스케일업                                       |
| **동시 채점 과부하**                 | 낮음        | 중     | - 채점 큐 최대 500개 제한<br>- 429 에러 반환으로 과부하 방지<br>- Phase 2에서 Redis 큐 도입                       |
| **데이터베이스 성능 저하**           | 낮음        | 중     | - 인덱스 최적화<br>- Supabase 쿼리 모니터링<br>- 필요 시 Pro 플랜 전환                                            |

### 12.2 보안 리스크

| 리스크               | 발생 가능성 | 영향도 | 완화 전략                                                                                   |
| -------------------- | ----------- | ------ | ------------------------------------------------------------------------------------------- |
| **악의적 코드 실행** | 중          | 높음   | - AST 파싱 필수<br>- 금지 모듈/함수 차단<br>- subprocess 격리 + 타임아웃<br>- 네트워크 차단 |
| **JWT 토큰 탈취**    | 낮음        | 중     | - httpOnly 쿠키 사용<br>- 2시간 짧은 유효 기간<br>- HTTPS 필수                              |
| **SQL Injection**    | 낮음        | 높음   | - ORM 사용 (Supabase SDK)<br>- 파라미터화된 쿼리<br>- 입력 검증                             |
| **XSS 공격**         | 낮음        | 중     | - React 자동 이스케이프<br>- Content-Security-Policy 헤더                                   |

### 12.3 일정 리스크

| 리스크                    | 발생 가능성 | 영향도 | 완화 전략                                                                              |
| ------------------------- | ----------- | ------ | -------------------------------------------------------------------------------------- |
| **채점 엔진 개발 복잡도** | 중          | 높음   | - 조기 프로토타입 개발<br>- 단순 케이스부터 점진적 확장<br>- 외부 라이브러리 활용 검토 |
| **프론트엔드 통합 지연**  | 중          | 중     | - API 문서 우선 작성<br>- Mock API로 병렬 개발<br>- 주간 통합 테스트                   |
| **요구사항 변경**         | 중          | 중     | - 변경 요청 프로세스 확립<br>- MVP 범위 엄격히 준수<br>- Phase 2로 연기                |
| **인력 부족**             | 낮음        | 높음   | - 명확한 역할 분담<br>- 코드 리뷰 문화<br>- 문서화 철저                                |

### 12.4 운영 리스크

| 리스크                   | 발생 가능성 | 영향도 | 완화 전략                                                                    |
| ------------------------ | ----------- | ------ | ---------------------------------------------------------------------------- |
| **Render/Supabase 장애** | 낮음        | 높음   | - 일 1회 자동 백업<br>- 다운타임 모니터링<br>- 사용자 공지 프로세스          |
| **비용 초과**            | 낮음        | 중     | - Free/Hobby 플랜으로 시작<br>- 월별 사용량 모니터링<br>- Pro 전환 예산 확보 |

---

## 부록 A: 참조 문서

- **도메인 정의서**: `docs/1-domain-definition.md` (v1.2)
- **입력 템플릿**: `docs/prd-input-template.md`
- **기술 스택 문서**: Render Docs, Supabase Docs, Express.js Docs

## 부록 B: 용어 사전

| 용어                                 | 설명                                  |
| ------------------------------------ | ------------------------------------- |
| **AC (Accepted)**                    | 모든 테스트 케이스 통과               |
| **WA (Wrong Answer)**                | 출력값 불일치                         |
| **TLE (Time Limit Exceeded)**        | 시간 제한 초과                        |
| **RE (Runtime Error)**               | 실행 중 예외 발생                     |
| **SE (Syntax Error)**                | 문법 오류 또는 금지 모듈 사용         |
| **MLE (Memory Limit Exceeded)**      | 메모리 제한 초과                      |
| **AST (Abstract Syntax Tree)**       | 추상 구문 트리, 코드 정적 분석에 사용 |
| **RBAC (Role-Based Access Control)** | 역할 기반 접근 제어                   |
| **JWT (JSON Web Token)**             | JSON 기반 인증 토큰                   |
| **MVP (Minimum Viable Product)**     | 최소 기능 제품                        |

---

**문서 종료**
